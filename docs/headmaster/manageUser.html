<!DOCTYPE HTML>
<html>
    <head>
        <title>Register Users</title>
        <link href="https://aarif123456.github.io/HogwartsLibrary/styles/bootstrap.css" rel="stylesheet" type="text/css" media="all">
        <link href="https://aarif123456.github.io/HogwartsLibrary/styles/main.css" rel="stylesheet" type="text/css" media="all" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="keywords" content="Hogwarts stuff" />
        <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
        <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,900' rel='stylesheet' type='text/css'>
        <!--<link href='https://fonts.googleapis.com/css?family=Alice' rel='stylesheet' type='text/css'>-->
        <script src="https://aarif123456.github.io/HogwartsLibrary/scripts/jquery/jquery.min.js"></script>
        <script src="https://aarif123456.github.io/HogwartsLibrary/scripts/jquery/jquery.easydropdown.js"></script>
        <link rel="stylesheet" href="https://aarif123456.github.io/HogwartsLibrary/styles/swipebox.css">
        <!------ Light Box ------>
        <script src="https://aarif123456.github.io/HogwartsLibrary/scripts/jquery/jquery.swipebox.min.js"></script> 
        <script type="text/javascript">
            jQuery(function($) {
            	$(".swipebox").swipebox();
            });
        </script>
        <!------ Eng Light Box ------>
        <script type="text/javascript" src="https://aarif123456.github.io/HogwartsLibrary/scripts/imported/easing.js"></script>
        <script type="text/javascript">
            jQuery(document).ready(function($) {
            	$(".scroll").click(function(event){		
            		event.preventDefault();
            		$('html,body').animate({scrollTop:$(this.hash).offset().top},1200);
            	});
            });
        </script>
        <input type="hidden" id="pageNum" value="0" >
        <input type="hidden" id="pageCategory" value="headmaster" >
        <script src="https://aarif123456.github.io/HogwartsLibrary/scripts/loadCommon.js"></script> 
	<link rel="stylesheet" type="text/css" href="https://aarif123456.github.io/HogwartsLibrary/styles/table.css">
  <script src="https://aarif123456.github.io/HogwartsLibrary/scripts/manageUser.js"> </script>
	<script >
   
   function registerUser() {
    var fname =document.getElementById("fname").value.trim();
      var lname =document.getElementById("lname").value.trim();
      var userCategory=document.getElementById("userCategory").value.trim();
      var userType=displayFields();

    if(userType=="none"){
      console.log( "Please select user type");
      return;
    }
    if(fname =="" || lname=="" || userCategory==""){
      console.log( "fill out all fields");
      return;
    }

      //create parameter to send to server side
      var par = "fname="+fname+"&lname="+lname+"&add=yes"+"&userType="+userType+"&userCategory="+userCategory;
      if(userType=="student"){
      par+="&house="+document.getElementById("house").value.trim();
      }
      

      //Ajax insert
       var xmlhttp = new XMLHttpRequest();
       var url="https://arif115.myweb.cs.uwindsor.ca/60334/projects/manageUser.php";
       xmlhttp.open('POST', url, true);
       xmlhttp.onreadystatechange = function() {
         if (this.readyState == 4 && this.status == 200) {
          console.log( this.responseText);
         }
       }
       xmlhttp.withCredentials = true;
       xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
       xmlhttp.send(par); 

       //clear fields
       document.getElementById("addForm").reset();
       displayFields();

   }

   function displayFields(){
      //Set variables needed
    var userCategory=document.getElementById("userCategory");
    var userCategoryText=document.getElementById("userCategoryText");
    var house = document.getElementById("house");
    var houseText = document.getElementById("houseText");
    var userType= document.getElementsByName("userType");
    userCategory.style.display = "inline";
    if(userType[0].checked){ //run if student selected 
      userCategoryText.innerHTML = "Major<br>";
      house.style.display = "inline";
      houseText.innerHTML="House<br>";
      return userType[0].value; //return student
    }
    if(userType[1].checked){ //code if professor is selected
      userCategoryText.innerHTML="Department<br>";
      house.style.display = "none";
      houseText.innerHTML="";
      return userType[1].value; //return professor
    }
    userCategory.style.display = "none";
    house.style.display = "none";
    userCategoryText.innerHTML="";
    houseText.innerHTML="";
    return "none";
   }

  </script>
</head> 
<body>
	<div class="banner">
    <div class="header">
      <div class="container">
        <div class="head-bann">
          <div class="logo">
            <a href="https://aarif123456.github.io/HogwartsLibrary/"><img src="https://aarif123456.github.io/HogwartsLibrary/resources/images/logo.png" class="img-responsive" alt="" /></a>
          </div>
          <div class="head-part">
          </div>  
          <div class="clearfix"> </div>
        </div>
        <!-- start userMenu -->
        <div class="userMenu">
          <a class="toggleMenu" href="">Menu</a>
          <ul class="nav">
            
          </ul>
          <script type="text/javascript" src="https://aarif123456.github.io/HogwartsLibrary/scripts/imported/nav.js"></script>
        </div>
        <!-- end userMenu -->
      </div>
    </div> 
    <div class="banner-info1">  
      <div class="banner-col">
      </div>

      <div class="container">

      </div>
    </div>
  </div>

    <form id="addForm" >
    First Name: <input type="text" id ="fname" name="fname" ><br>
    Last Name: <input type="text" id ="lname" name="lname"><br>
    User Type: <input type="radio" onchange="displayFields();" name="userType" id ="studentUserType" value="student" > Student   
    <input type="radio" onchange="displayFields();"name="userType" id ="teacherUserType" value="professor"> Professor<br>
    <div id="userCategoryText"></div> <input type="text" id ="userCategory" name="userCategory" style="display: none;">
    <div id="houseText"></div><select name="house" id="house" form = "addForm" style="display: none;">
      <option value = "Gryffindor">Gryffindor</option> 
      <option value = "Hufflepuff">Hufflepuff</option>
      <option value = "Ravenclaw">Ravenclaw</option>
      <option value = "Slytherin">Slytherin</option>
    </select><br><br>
    <button type="button" onclick="registerUser(false);">Create User!</button>
    </form>
    <p> <span id="ID"></span></p>

    

	</body>   
	<div id="commonFooter"></div>
</html> 
